"use strict";(self.webpackChunkFranzininho=self.webpackChunkFranzininho||[]).push([[2160],{24888:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>l,contentTitle:()=>a,default:()=>m,frontMatter:()=>i,metadata:()=>t,toc:()=>c});var r=n(17624),s=n(4552);const i={id:"circuitpython-servo-motor",title:"Servo motor",slug:"/franzininho-wifi/exemplos-circuitpython/servo-motor",description:"Confira nesse artigo como controlar um servo motor com a Franzininho WiFi no CircuitPython. Veja como \xe9 f\xe1cil!",author:"Mateus Adriano Ventura Vieira"},a=void 0,t={id:"FranzininhoWifi/exemplos-circuitpython/circuitpython-servo-motor",title:"Servo motor",description:"Confira nesse artigo como controlar um servo motor com a Franzininho WiFi no CircuitPython. Veja como \xe9 f\xe1cil!",source:"@site/docs/FranzininhoWifi/exemplos-circuitpython/servo-motor.md",sourceDirName:"FranzininhoWifi/exemplos-circuitpython",slug:"/franzininho-wifi/exemplos-circuitpython/servo-motor",permalink:"/en/docs/franzininho-wifi/exemplos-circuitpython/servo-motor",draft:!1,unlisted:!1,editUrl:"https://github.com/Franzininho/docs-franzininho-site/edit/main/docs/FranzininhoWifi/exemplos-circuitpython/servo-motor.md",tags:[],version:"current",frontMatter:{id:"circuitpython-servo-motor",title:"Servo motor",slug:"/franzininho-wifi/exemplos-circuitpython/servo-motor",description:"Confira nesse artigo como controlar um servo motor com a Franzininho WiFi no CircuitPython. Veja como \xe9 f\xe1cil!",author:"Mateus Adriano Ventura Vieira"},sidebar:"docs",previous:{title:"Sensor de Dist\xe2ncia Ultrass\xf4nico HC-SR04",permalink:"/en/docs/franzininho-wifi/exemplos-circuitpython/sensor-hcsr04"},next:{title:"Sistema de irriga\xe7\xe3o autom\xe1tico",permalink:"/en/docs/franzininho-wifi/exemplos-circuitpython/irrigacao"}},l={},c=[{value:"<strong>Materiais Necess\xe1rios</strong>",id:"materiais-necess\xe1rios",level:2},{value:"<strong>Circuito</strong>",id:"circuito",level:2},{value:"<strong>C\xf3digos</strong>",id:"c\xf3digos",level:2},{value:"<strong>Exemplo 1</strong>",id:"exemplo-1",level:3},{value:"<strong>Exemplo 2</strong>",id:"exemplo-2",level:3},{value:"<strong>An\xe1lise dos C\xf3digos</strong>",id:"an\xe1lise-dos-c\xf3digos",level:2},{value:"<strong>Exemplo 1</strong>",id:"exemplo-1-1",level:3},{value:"<strong>Conclus\xe3o</strong>",id:"conclus\xe3o",level:2}];function d(e){const o={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.M)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.p,{children:"Um servo motor \xe9 um pequeno motor de corrente cont\xednua. Diferentemente dos demais motores DC, onde apenas controlamos a velocidade de giro, conseguimos controlar a posi\xe7\xe3o de um servo, atrav\xe9s do PWM."}),"\n",(0,r.jsx)(o.p,{children:"O servo que vamos utilizar nesse exemplo, tem a resolu\xe7\xe3o de meia volta, ou seja, de 0\xb0 a 180\xb0."}),"\n",(0,r.jsx)(o.h2,{id:"materiais-necess\xe1rios",children:(0,r.jsx)(o.strong,{children:"Materiais Necess\xe1rios"})}),"\n",(0,r.jsxs)(o.ul,{children:["\n",(0,r.jsx)(o.li,{children:"1 Placa Franzininho WiFi com CircuitPython;"}),"\n",(0,r.jsx)(o.li,{children:"1 Micro servo 9g;"}),"\n",(0,r.jsx)(o.li,{children:"1 Protoboard;"}),"\n",(0,r.jsx)(o.li,{children:"1 potenci\xf4metro de 10 k\u03a9;"}),"\n",(0,r.jsx)(o.li,{children:"Jumpers."}),"\n"]}),"\n",(0,r.jsx)(o.h2,{id:"circuito",children:(0,r.jsx)(o.strong,{children:"Circuito"})}),"\n",(0,r.jsx)(o.p,{children:"Para os exemplos que vamos ver a seguir, realize a seguinte montagem:"}),"\n",(0,r.jsx)(o.p,{children:(0,r.jsx)(o.img,{alt:"Circuito Servo Motor",src:n(57472).c+"",width:"1755",height:"681"})}),"\n",(0,r.jsxs)(o.p,{children:[(0,r.jsx)(o.strong,{children:"Observa\xe7\xe3o:"})," o servo deve ser conectado ao 5V da placa. E, caso deseje usar mais de dois servos, uma fonte externa deve ser usada."]}),"\n",(0,r.jsx)(o.h2,{id:"c\xf3digos",children:(0,r.jsx)(o.strong,{children:"C\xf3digos"})}),"\n",(0,r.jsx)(o.p,{children:"Assim como quando aprendemos a usar PWM, vamos importar o m\xf3dulo simpleio. Tamb\xe9m, vamos importar um novo m\xf3dulo para trabalharmos com o servo motor."}),"\n",(0,r.jsxs)(o.p,{children:["Para ter acesso a esses m\xf3dulos, acesse o endere\xe7o: ",(0,r.jsx)(o.a,{href:"https://circuitpython.org/libraries",children:"https://circuitpython.org/libraries"}),". Fa\xe7a o download, de acordo com a vers\xe3o do CircuitPython instalada na sua Franzininho WiFi."]}),"\n",(0,r.jsx)(o.p,{children:(0,r.jsx)(o.img,{alt:"Circuito Servo Motor",src:n(99508).c+"",width:"1543",height:"328"})}),"\n",(0,r.jsx)(o.p,{children:"Ap\xf3s finalizar o download, importe os dois m\xf3dulos para a pasta de arquivos da Franzininho WiFi:"}),"\n",(0,r.jsxs)(o.ul,{children:["\n",(0,r.jsxs)(o.li,{children:[(0,r.jsx)(o.strong,{children:"simpleio.mpy"}),";"]}),"\n",(0,r.jsxs)(o.li,{children:[(0,r.jsx)(o.strong,{children:"adafruit_motor"}),"."]}),"\n"]}),"\n",(0,r.jsx)(o.h3,{id:"exemplo-1",children:(0,r.jsx)(o.strong,{children:"Exemplo 1"})}),"\n",(0,r.jsx)(o.p,{children:"No primeiro exemplo, vamos aprender a como programar um servo motor usando CircuitPython. Para isso, copie o c\xf3digo abaixo:"}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-python",children:"import board\nimport pwmio\nfrom adafruit_motor import servo \nfrom time import sleep\n\npin = board.IO1\npwm = pwmio.PWMOut(pin, frequency = 50)\n\nmy_servo = servo.Servo(pwm)\n\nwhile True:\n    for angle in range(0, 180, 10): \n        my_servo.angle = angle\n        sleep(0.1)\n    for angle in range(180, 0, -10): \n        my_servo.angle = angle\n        sleep(0.1)\n"})}),"\n",(0,r.jsx)(o.p,{children:"Salve e execute o c\xf3digo."}),"\n",(0,r.jsx)(o.h3,{id:"exemplo-2",children:(0,r.jsx)(o.strong,{children:"Exemplo 2"})}),"\n",(0,r.jsx)(o.p,{children:"J\xe1 nesse exemplo, vamos controlar o posicionamento do servo atrav\xe9s de um potenci\xf4metro. E para isso, vamos usar alguns recursos que aprendemos anteriormente. Escreva o c\xf3digo abaixo:"}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-python",children:"import board\nimport pwmio\nfrom adafruit_motor import servo\nimport simpleio\nimport math\nfrom analogio import AnalogIn\nfrom time import sleep\n\npin = board.IO1\npwm = pwmio.PWMOut(pin, frequency = 50)\nmy_servo = servo.Servo(pwm)\n\npotPin = board.IO2\npot = AnalogIn(potPin)\n\ndef converter(pin):\n    pinValue = pin.value\n    mapValue = math.trunc(simpleio.map_range\n               (pinValue, 536, 51355, 0, 180))\n    return mapValue\n\nwhile True:\n    angle = converter(pot)\n    my_servo.angle = angle\n    sleep(0.1)\n"})}),"\n",(0,r.jsx)(o.p,{children:"Ap\xf3s terminar de escrever, salve o c\xf3digo e teste-o."}),"\n",(0,r.jsx)(o.h2,{id:"an\xe1lise-dos-c\xf3digos",children:(0,r.jsx)(o.strong,{children:"An\xe1lise dos C\xf3digos"})}),"\n",(0,r.jsx)(o.h3,{id:"exemplo-1-1",children:(0,r.jsx)(o.strong,{children:"Exemplo 1"})}),"\n",(0,r.jsxs)(o.p,{children:["O primeiro m\xf3dulo que vamos importar, \xe9 o ",(0,r.jsx)(o.strong,{children:"board"}),". Ele possibilita o acesso aos pinos da placa:"]}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-python",children:"import board\n"})}),"\n",(0,r.jsxs)(o.p,{children:["Para conseguirmos usar os pinos PWM, precisamos do m\xf3dulo ",(0,r.jsx)(o.strong,{children:"pwmio"}),":"]}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-python",children:"import pwmio\n"})}),"\n",(0,r.jsxs)(o.p,{children:["Tamb\xe9m, ser\xe1 necess\xe1rio a biblioteca auxiliar ",(0,r.jsx)(o.strong,{children:"adafruit_motor.servo"}),". Ela ser\xe1 \xfatil para controlar o servo com base na sa\xedda PWM:"]}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-python",children:"from adafruit_motor import servo\n"})}),"\n",(0,r.jsxs)(o.p,{children:["E, por \xfaltimo, precisaremos da fun\xe7\xe3o ",(0,r.jsx)(o.strong,{children:"sleep"})," do m\xf3dulo ",(0,r.jsx)(o.strong,{children:"time"}),", para intervalos de temporiza\xe7\xe3o:"]}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-python",children:"from time import sleep\n"})}),"\n",(0,r.jsx)(o.p,{children:"Agora, vamos atribuir o GPIO1 da placa a vari\xe1vel pin:"}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-python",children:"pin  =  board.IO1\n"})}),"\n",(0,r.jsx)(o.p,{children:"Tamb\xe9m, configuraremos esse pino como uma sa\xedda PWM. Repare, que diferente do LED, precisamos informar a frequ\xeancia, pois, por padr\xe3o ela est\xe1 configurada com 500Hz e o padr\xe3o do servo motor \xe9 50Hz:"}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-python",children:"pwm  =  pwmio.PWMOut(pin,  frequency  =  50)\n"})}),"\n",(0,r.jsxs)(o.p,{children:["Al\xe9m disso, vamos criar o objeto ",(0,r.jsx)(o.strong,{children:"my_servo"})," e atribuir o pino ",(0,r.jsx)(o.strong,{children:"pwm"})," a ele:"]}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-python",children:"my_servo  =  servo.Servo(pwm)\n"})}),"\n",(0,r.jsxs)(o.p,{children:["Por fim, dentro do ",(0,r.jsx)(o.strong,{children:"while True"}),", o nosso loop, faremos com que o servo se mova continuamente. Para isso, usaremos a estrutura de repeti\xe7\xe3o ",(0,r.jsx)(o.strong,{children:"for"})," e o comando ",(0,r.jsx)(o.strong,{children:"range( )"}),", que gera uma lista."]}),"\n",(0,r.jsx)(o.p,{children:"Como par\xe2metros do primeiro la\xe7o, vamos informar o valor inicial (0), valor final(180) e o intervalo de contagem, ou seja, de 10 em 10. Dentro do la\xe7o, esse valor ser\xe1 enviado para o servo a cada 0.1 segundos:"}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-python",children:"while True:\n    for angle in range(0, 180, 10): \n        my_servo.angle = angle\n        sleep(0.1)\n"})}),"\n",(0,r.jsx)(o.p,{children:"J\xe1 no segundo la\xe7o, faremos o mesmo. Por\xe9m, inv\xe9s de incrementar de 10 em 10, a contagem ser\xe1 decrescente:"}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-python",children:"for angle in range(180, 0, -10): \n        my_servo.angle = angle\n        sleep(0.1)\n"})}),"\n",(0,r.jsx)(o.p,{children:(0,r.jsx)(o.strong,{children:"Exemplo 2"})}),"\n",(0,r.jsxs)(o.p,{children:["Al\xe9m dos m\xf3dulos que j\xe1 usamos no primeiro exemplo, precisaremos importar ",(0,r.jsx)(o.strong,{children:"simpleio"}),", para usarmos a fun\xe7\xe3o de mapeamento:"]}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-python",children:"import simpleio\n"})}),"\n",(0,r.jsxs)(o.p,{children:["Vamos precisar tamb\xe9m da biblioteca ",(0,r.jsx)(o.strong,{children:"math"}),":"]}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-python",children:"import math\n"})}),"\n",(0,r.jsxs)(o.p,{children:["E, da fun\xe7\xe3o ",(0,r.jsx)(o.strong,{children:"AnalogIn"})," da biblioteca ",(0,r.jsx)(o.strong,{children:"analogio"}),":"]}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-python",children:"from analogio import AnalogIn\n"})}),"\n",(0,r.jsx)(o.p,{children:"Al\xe9m de configurarmos o servo, tamb\xe9m vamos configurar o potenci\xf4metro. Para isso, primeiro vamos atribuir o GPIO2 a vari\xe1vel potPin:"}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-python",children:"potPin  =  board.IO2\n"})}),"\n",(0,r.jsxs)(o.p,{children:["Por fim, vamos atribuir esse pino ao objeto ",(0,r.jsx)(o.strong,{children:"pot"})," como uma entrada anal\xf3gica:"]}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-python",children:"pot  =  AnalogIn(potPin)\n"})}),"\n",(0,r.jsxs)(o.p,{children:["Agora, vamos criar uma fun\xe7\xe3o chamada ",(0,r.jsx)(o.strong,{children:"converte"}),". Essa fun\xe7\xe3o receber\xe1 como par\xe2metro o pino que estamos lendo:"]}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-python",children:"def converter(pin):\n"})}),"\n",(0,r.jsxs)(o.p,{children:["Dentro da fun\xe7\xe3o, faremos a leitura do valor enviado pelo potenci\xf4metro e armazen\xe1-la na vari\xe1vel ",(0,r.jsx)(o.strong,{children:"pinValue"}),":"]}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-python",children:"pinValue  =  pin.value\n"})}),"\n",(0,r.jsxs)(o.p,{children:["Ademais, converteremos o valor da leitura para graus. Para tal, usaremos a fun\xe7\xe3o ",(0,r.jsx)(o.strong,{children:"simpleio.map_range"}),". Os par\xe2metros dessa fun\xe7\xe3o s\xe3o: valor bruto (valor da leitura naquele instante), valor m\xednimo de entrada, valor m\xe1ximo de entrada, valor m\xednimo de sa\xedda e valor m\xe1ximo de sa\xedda. Tamb\xe9m, precisaremos da fun\xe7\xe3o ",(0,r.jsx)(o.strong,{children:"math.trunc"}),", que eliminar\xe1 as casas decimais. Todas essas informa\xe7\xf5es ficar\xe3o armazenadas na vari\xe1vel ",(0,r.jsx)(o.strong,{children:"mapValue"}),":"]}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-python",children:"mapValue = math.trunc(simpleio.map_range(pinValue, 536, 51355, 0, 180))\n"})}),"\n",(0,r.jsxs)(o.p,{children:["E, a fun\xe7\xe3o nos retornar\xe1 o valor de ",(0,r.jsx)(o.strong,{children:"mapValue"}),":"]}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-python",children:"return  mapValue\n"})}),"\n",(0,r.jsxs)(o.p,{children:["No la\xe7o de repeti\xe7\xe3o infinita, ",(0,r.jsx)(o.strong,{children:"while True"}),", atribuiremos o valor retornado pela fun\xe7\xe3o ",(0,r.jsx)(o.strong,{children:"converte"})," a vari\xe1vel ",(0,r.jsx)(o.strong,{children:"angle"}),". Esse valor ser\xe1 enviado para o servo motor a cada 0.1 segundos:"]}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-python",children:"while True:\n    angle = converter(pot)\n    my_servo.angle = angle\n    sleep(0.1)\n"})}),"\n",(0,r.jsx)(o.h2,{id:"conclus\xe3o",children:(0,r.jsx)(o.strong,{children:"Conclus\xe3o"})}),"\n",(0,r.jsx)(o.p,{children:"No decorrer da explica\xe7\xe3o, aprendemos a como usar um servo motor de uma maneira simples utilizando CircuitPython. Tamb\xe9m, pudemos ver como usar um potenci\xf4metro para controlar a movimenta\xe7\xe3o dos nossos servos."}),"\n",(0,r.jsxs)(o.table,{children:[(0,r.jsx)(o.thead,{children:(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.th,{children:"Autor"}),(0,r.jsx)(o.th,{children:"Mateus Adriano Ventura Vieira"})]})}),(0,r.jsx)(o.tbody,{children:(0,r.jsxs)(o.tr,{children:[(0,r.jsx)(o.td,{children:"Data:"}),(0,r.jsx)(o.td,{children:"17/05/2022"})]})})]})]})}function m(e={}){const{wrapper:o}={...(0,s.M)(),...e.components};return o?(0,r.jsx)(o,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},99508:(e,o,n)=>{n.d(o,{c:()=>r});const r=n.p+"assets/images/biblioteca-servo-58357a122b96bde035495e9835cb75e7.png"},57472:(e,o,n)=>{n.d(o,{c:()=>r});const r=n.p+"assets/images/circuito-servo-cdd775c22e65131a61c0d1db61c05fe1.webp"},4552:(e,o,n)=>{n.d(o,{I:()=>t,M:()=>a});var r=n(11504);const s={},i=r.createContext(s);function a(e){const o=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function t(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(i.Provider,{value:o},e.children)}}}]);